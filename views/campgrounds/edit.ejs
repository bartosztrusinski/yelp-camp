<%- layout('layouts/boilerplate') %>
<link rel="stylesheet" href="/css/delete-checkbox.css">

<div class="row">
    <h1 class="text-center mb-4">Edit Campground</h1>
    <div class="col-lg-8 offset-lg-2 col-xl-6 offset-xl-3">
        <div class="card shadow rounded-3">
            <div class="card-body">
                <form action="/campgrounds/<%= campground._id %>?_method=PUT" method="POST" novalidate
                      class="validated-form"
                      enctype="multipart/form-data">
                    <div class="mb-3">
                        <label class="form-label lead" for="title">Title</label>
                        <input class="form-control" type="text" id="title" name="campground[title]"
                               value="<%= campground.title %>" required>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                    <div class=" mb-3">
                        <label class="form-label lead" for="location">Location</label>
                        <input class="form-control" type="text" id="location" name="campground[location]"
                               value="<%= campground.location %>" required>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                    <div class=" mb-3">
                        <label class="form-label lead" for="price">Campground Price</label>
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="price-label">$</span>
                            <input type="text" class="form-control" aria-label="price" aria-describedby="price-label"
                                   id="price"
                                   name="campground[price]" placeholder="0.00" value="<%= campground.price %>" required>
                            <div class="valid-feedback">
                                Looks good!
                            </div>
                        </div>
                    </div>
                    <div class=" mb-3">
                        <label class="form-label lead" for="description">Description</label>
                        <textarea class="form-control" type="text" id="description"
                                  name="campground[description]" required><%= campground.description %></textarea>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                    <div class="mb-4">
                        <label for="image" class="form-label lead">Add Images</label>
                        <input class="form-control" type="file" id="image" name="image" multiple>
                    </div>
                    <div class="mb-3 row">
                        <p class="lead mb-2">Delete Images</p>
                        <% for(let [i, image] of campground.images.entries()){ %>
                            <div class="col-md-<%= 12 / campground.images.length %> d-flex flex-column align-items-center mb-3">
                                <div class="position-relative">
                                    <img src="<%= image.thumbnail %>" alt="" class="rounded img-fluid">
                                    <label class="custom-label" for="image-<%= i %>">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="bi bi-trash-fill"
                                             viewBox="0 0 16 16">
                                            <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
                                        </svg>
                                    </label>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="image-<%= i %>"
                                           name="deleteImages[]" value="<%= image.filename %>">
                                </div>
                            </div>
                        <% } %>
                    </div>
                    <div class="mb-3">
                        <button class="btn btn-info">Update Campground</button>
                    </div>
                </form>
                <a href="/campgrounds/<%= campground._id %>">Back To Campground</a>
            </div>
        </div>
    </div>
</div>